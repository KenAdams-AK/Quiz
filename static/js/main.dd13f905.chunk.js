(this.webpackJsonpvid=this.webpackJsonpvid||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},106:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),l=a.n(r),o=a(17),i=(a(100),a(15)),u=a(34),s=function(e){return{type:"HANDLE_LOGIN",payload:e}},d=a(8),m=a(159),E=a(160),v=a(163);a(101);var b=function(){var e=Object(o.b)(),t=Object(i.g)(),a=Object(o.c)((function(e){return e.login.username}));Object(n.useEffect)((function(){a&&t.push("/")}),[]);var r=Object(n.useState)(""),l=Object(d.a)(r,2),u=l[0],b=l[1],O=Object(n.useState)(""),f=Object(d.a)(O,2),_=f[0],p=f[1],j=/^(?=[a-zA-Z._]{3,12}$)(?!.*[_.]{2})[^_.].*[^_.]$/;return c.a.createElement("div",{className:"login__container"},c.a.createElement(v.a,{onSubmit:function(){e(s(u)),b(""),console.log("clicked")},style:{display:"flex",flexDirection:"column"},component:"form",sx:{"& .MuiTextField-root":{width:"25ch"}},noValidate:!0,autoComplete:"off"},c.a.createElement(m.a,{onChange:function(e){b(e.target.value),j.test(String(e.target.value))?p(""):p("Username requires 3 to 12 characters, only latin letters can be used")},value:u,required:!0,id:"outlined-required",label:"Name is required"}),c.a.createElement("div",null,c.a.createElement(E.a,{type:"submit",style:{marginTop:"20px"},variant:"contained",disabled:!u||!!_},"Start quiz"))),c.a.createElement("div",{className:"login__error"},_))};a(106);var O=function(){var e=Object(o.b)(),t=Object(i.g)(),a=Object(o.c)((function(e){return e.login.username}));return c.a.createElement("div",{className:"header__container"},c.a.createElement(u.b,{to:"/",className:"link"},c.a.createElement("h1",{className:"header__logo"},"Quiz")),c.a.createElement("h2",{className:"header__greeting"},"Hello, ",a,"!"),c.a.createElement("div",{className:"header__scores"},c.a.createElement(u.b,{to:"/scores",className:"link"},c.a.createElement(E.a,{variant:"contained"},"Scores"))),c.a.createElement("div",{className:"header__logout"},c.a.createElement(E.a,{onClick:function(){e({type:"HANDLE_LOGOUT"}),t.push("/login")},variant:"contained"},"Logout")))},f=a(161),_=a(78),p=a.n(_);var j=c.a.memo((function(e){var t=e.handleClick,a=Object(o.c)((function(e){return e.quiz.answers}));return c.a.createElement(c.a.Fragment,{key:Object(f.a)()},a.map((function(e){return c.a.createElement(E.a,{className:"quiz__card-answer",onClick:t,value:e,key:Object(f.a)(),variant:"contained"},e)})))}));a(125);var g=function(){var e,t=Object(o.b)(),a=Object(i.g)(),r=Object(o.c)((function(e){return e.quiz})),l=Object(o.c)((function(e){return e.login.username})),u=Object(n.useState)(!1),s=Object(d.a)(u,2),m=s[0],E=s[1],v=Object(n.useState)(0),b=Object(d.a)(v,2),O=b[0],_=b[1],p=Object(n.useState)(null),g=Object(d.a)(p,2),S=g[0],y=g[1],h=Object(n.useState)(15),N=Object(d.a)(h,2),T=N[0],A=N[1],z=Object(n.useState)(0),D=Object(d.a)(z,2),q=D[0],I=D[1],k=Object(n.useState)(100),C=Object(d.a)(k,2),U=C[0],R=C[1],w=Object(n.useState)("green"),Q=Object(d.a)(w,2),L=Q[0],F=Q[1],x=function(){_((function(e){return e+1})),A(15),R(100),F("green")},G=function(){E(!0),clearInterval(S)};Object(n.useEffect)((function(){m&&(t({type:"SAVE_CURRENT_SCORE",payload:{id:Object(f.a)(),username:l,score:q,isDisplayed:!0}}),a.push("/scores"))}),[m]),Object(n.useEffect)((function(){m||t(function(e){return{type:"SET_QUESTION_ANSWERS",payload:e}}(O))}),[O]),Object(n.useEffect)((function(){y(setInterval((function(){A((function(e){return e-1})),R((function(e){return e-100/15}))}),1e3)),clearInterval(S)}),[]),Object(n.useEffect)((function(){-1===T&&x(),0===T&&O===r.quiz.length-1&&G()}),[T]);var Z=Object(n.useCallback)((function(e){var t;x(),e.target.value===(null===r||void 0===r||null===(t=r.quiz[O])||void 0===t?void 0:t.correct_answer)&&I(q+100*T),O===r.quiz.length-1&&(G(),console.log("lastclick",q))}),[O]);return Object(n.useEffect)((function(){4===T&&F("red")}),[T]),c.a.createElement("div",{className:"quiz__container"},c.a.createElement("div",{className:"quiz__score"},"Score: ",q),c.a.createElement("div",{className:"quiz__card-container"},c.a.createElement("div",{className:"quiz__timer-container"},c.a.createElement("div",{className:"quiz__timer-line",style:{width:"".concat(U,"%"),background:"".concat(L)}}),c.a.createElement("div",{className:"quiz__timer-countdown"},T)),null===r||void 0===r||null===(e=r.quiz)||void 0===e?void 0:e.map((function(e,t){if(t===O)return c.a.createElement("div",{className:"quiz__card",key:Object(f.a)()},c.a.createElement("div",{className:"quiz__card-head"},c.a.createElement("div",null,"Category: ",c.a.createElement("h3",null,e.category)),c.a.createElement("div",null,"Difficalty: ",c.a.createElement("h3",null,e.difficulty))),c.a.createElement("div",{className:"quiz__card-question"},c.a.createElement("h4",null,e.question)),c.a.createElement("div",{className:"quiz__card-answers"},c.a.createElement(j,{handleClick:Z})))}))))};var S=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{className:"home__container"},c.a.createElement(O,null),a?c.a.createElement(g,null):c.a.createElement("div",{className:"home__button"},c.a.createElement(E.a,{onClick:function(){return r(!0)},style:{padding:"30px"},variant:"contained"},c.a.createElement("h3",null,"Lets get started"))))},y=a(14),h=a(18);a(126);var N=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.scores.currentScoreData})),a=Object(o.c)((function(e){return e.scores.isQuizFinished})),r=Object(o.c)((function(e){return e.scores.scoresData})),l=Object(n.useState)([]),i=Object(d.a)(l,2),u=i[0],s=i[1],m=Object(n.useState)({id:t.id,username:t.username,score:t.score,isDisplayed:!0}),v=Object(d.a)(m,2),b=v[0],_=v[1],p=Object(n.useState)(!1),j=Object(d.a)(p,2),g=j[0],S=j[1];return Object(n.useEffect)((function(){_()}),[]),Object(n.useEffect)((function(){a&&e({type:"SAVE_NEW_SCORE",payload:b})}),[]),Object(n.useEffect)((function(){var e,a,n=r.sort((function(e,t){return e.score>t.score?-1:1})).map((function(e,t){return t>4&&(e.isDisplayed=!1),Object(h.a)({},e)})).filter((function(e){return!0===e.isDisplayed})),c=(null===(e=n[4])||void 0===e?void 0:e.score)>=t.score&&(null===(a=n[4])||void 0===a?void 0:a.id)!==t.id?[].concat(Object(y.a)(n),[r.find((function(e){return e.id===t.id}))]):Object(y.a)(n);s(c)}),[r]),c.a.createElement(c.a.Fragment,null,c.a.createElement(O,null),c.a.createElement("div",{className:"scores__container"},g?c.a.createElement("table",{className:"scores__table"},c.a.createElement("caption",null,"Scores"),c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u2116"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Score"))),c.a.createElement("tbody",null,r.map((function(e,a){return e.id===t.id?c.a.createElement("tr",{style:{background:"yellow"},key:Object(f.a)()},c.a.createElement("th",null,a+1),c.a.createElement("td",null,null===e||void 0===e?void 0:e.username),c.a.createElement("td",null,null===e||void 0===e?void 0:e.score)):c.a.createElement("tr",{key:Object(f.a)()},c.a.createElement("th",null,a+1),c.a.createElement("td",null,null===e||void 0===e?void 0:e.username),c.a.createElement("td",null,null===e||void 0===e?void 0:e.score))})))):c.a.createElement("table",{className:"scores__table"},c.a.createElement("caption",null,"Scores"),c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u2116"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Score"))),c.a.createElement("tbody",null,u[5]?u.map((function(e,a){return 5===a?c.a.createElement("tr",{style:{background:"yellow"},key:Object(f.a)()},c.a.createElement("th",null,r.findIndex((function(e){return e.id===t.id}))+1),c.a.createElement("td",null,null===e||void 0===e?void 0:e.username),c.a.createElement("td",null,null===e||void 0===e?void 0:e.score)):c.a.createElement("tr",{key:Object(f.a)()},c.a.createElement("th",null,a+1),c.a.createElement("td",null,null===e||void 0===e?void 0:e.username),c.a.createElement("td",null,null===e||void 0===e?void 0:e.score))})):u.map((function(e,a){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)?c.a.createElement("tr",{style:{background:"yellow"},key:Object(f.a)()},c.a.createElement("th",null,a+1),c.a.createElement("td",null,null===e||void 0===e?void 0:e.username),c.a.createElement("td",null,null===e||void 0===e?void 0:e.score)):c.a.createElement("tr",{key:Object(f.a)()},c.a.createElement("th",null,a+1),c.a.createElement("td",null,null===e||void 0===e?void 0:e.username),c.a.createElement("td",null,null===e||void 0===e?void 0:e.score))})))),c.a.createElement("div",{className:"scores__logout"},c.a.createElement(E.a,{onClick:function(){return S(!0)},variant:"contained"},"All relults >>"))))};var T=function(){var e=Object(o.b)(),t=localStorage.getItem("currentUser"),a=localStorage.getItem("currentScore"),n=localStorage.getItem("scoresData"),r=localStorage.getItem("quizData");if(t&&e(s(t)),n&&e(function(e){return{type:"SET_SCORES_DATA",payload:e}}(JSON.parse(n).data)),a&&e({type:"SET_CURRENT_SCORE",payload:a}),r){var l=JSON.parse(r);e({type:"SET_QUIZ_DATA",payload:l.data})}else e((function(e){e({type:"GET_QUIZ_DATA_REQUEST"}),p()({method:"get",url:"https://opentdb.com/api.php?amount=10&category=23&type=multiple"}).then((function(t){var a=t.data.results;e(function(e){return{type:"GET_QUIZ_DATA_SUCCESS",payload:e}}(a)),console.log(a)})).catch((function(t){var a,n,c=null===t||void 0===t||null===(a=t.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message;e(function(e){return{type:"GET_QUIZ_DATA_FAILURE",payload:e}}(t)),console.log(c)}))}));var d=function(e){for(var a=e.component,n=arguments.length,r=new Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return c.a.createElement(i.b,Object.assign({},r,{render:function(e){return t?c.a.createElement(a,e):c.a.createElement(i.a,{to:{pathname:"/login"}})}}))};return c.a.createElement(u.a,null,c.a.createElement("div",{className:"main__container"},c.a.createElement(i.d,null,c.a.createElement(d,{exact:!0,path:"/",component:S}),c.a.createElement(d,{exact:!0,path:"/scores",component:N}),c.a.createElement(i.b,{path:"/login",component:b}),c.a.createElement(i.a,{from:"*",to:"/"}))))},A=a(35),z=a(79),D=a(80),q={isLoggedin:!1,username:null},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HANDLE_LOGIN":return localStorage.setItem("currentUser",t.payload),{isLoggedin:!0,username:t.payload};case"HANDLE_LOGOUT":return localStorage.removeItem("currentUser"),{isLoggedin:!1,username:null};default:return e}},k={loading:!1,quiz:[],answers:[],error:null},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_QUIZ_DATA_REQUEST":return{loading:!0};case"GET_QUIZ_DATA_SUCCESS":return localStorage.setItem("quizData",JSON.stringify({data:t.payload})),Object(h.a)(Object(h.a)({},e),{},{loading:!1,quiz:t.payload});case"GET_QUIZ_DATA_FAILURE":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.payload});case"SET_QUIZ_DATA":return Object(h.a)(Object(h.a)({},e),{},{quiz:t.payload});case"SET_QUESTION_ANSWERS":var a,n,c;return e.quiz[t.payload]?(a=[null===e||void 0===e||null===(n=e.quiz[t.payload])||void 0===n?void 0:n.correct_answer].concat(Object(y.a)(null===e||void 0===e||null===(c=e.quiz[t.payload])||void 0===c?void 0:c.incorrect_answers)).sort((function(e,t){return Math.random()-.5})),Object(h.a)(Object(h.a)({},e),{},{answers:a})):e;default:return e}},U={isQuizFinished:!1,currentScoreData:{},scoresData:[]},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SCORES_DATA":return Object(h.a)(Object(h.a)({},e),{},{isQuizFinished:!1,scoresData:t.payload});case"SET_CURRENT_SCORE":return Object(h.a)(Object(h.a)({},e),{},{isQuizFinished:!1,currentScoreData:t.payload});case"SAVE_NEW_SCORE":var a=[].concat(Object(y.a)(e.scoresData),[t.payload]);return localStorage.setItem("scoresData",JSON.stringify({data:a})),Object(h.a)(Object(h.a)({},e),{},{isQuizFinished:!0,scoresData:a});case"SAVE_CURRENT_SCORE":return localStorage.setItem("currentScoreData",JSON.stringify(t.payload)),Object(h.a)(Object(h.a)({},e),{},{isQuizFinished:!0,currentScoreData:t.payload});default:return e}},w=Object(A.combineReducers)({login:I,quiz:C,scores:R}),Q=Object(A.createStore)(w,Object(z.composeWithDevTools)(Object(A.applyMiddleware)(D.a)));var L=function(){return c.a.createElement(o.a,{store:Q},c.a.createElement("div",{className:"App"},c.a.createElement(T,null)))};l.a.render(c.a.createElement(L,null),document.getElementById("root"))},91:function(e,t,a){e.exports=a(127)}},[[91,1,2]]]);
//# sourceMappingURL=main.dd13f905.chunk.js.map